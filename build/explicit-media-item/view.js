import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(r={getContext:()=>e.getContext,store:()=>e.store},i={},t.d(i,r),i),{state:n}=(0,o.store)("buntywp/explicit-media",{isOpen:!1,isMediaShared:!1,imageSrc:"",Copied:!1,state:{get isMediaLiked(){return(0,o.getContext)().liked},get likeCount(){return(e=(0,o.getContext)().likeCount)<1e3?e.toString():e<1e6?(e/1e3).toFixed(1)+"K":(e/1e6).toFixed(1)+"M";var e},get expImageSrc(){return n.imageSrc},get expIsPopupOpen(){return n.isOpen},get expTwitterShareURL(){const e=(0,o.getContext)();return"https://x.com/intent/post?url="+encodeURIComponent(e.expShareUrl)},get expFBShareURL(){const e=(0,o.getContext)();return"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e.expShareUrl)}},actions:{expToggleLike:()=>{const e=(0,o.getContext)();e.liked=!e.liked,e.likeCount=e.liked?Number(e.likeCount+1):Number(e.likeCount-1),function(e){fetch(n.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"save_media_likes",nonce:n.nonce,context:JSON.stringify(e)})}).then((e=>e.json())).then((e=>{console.log("Like saved:",e)})).catch((e=>{console.error("Error saving Like:",e)}))}(e)},expShowLightbox:()=>{const e=(0,o.getContext)();n.isOpen=!0,n.imageSrc=e.mediaUrl},expHideLightbox:()=>{n.isOpen=!1,n.imageSrc=""},expToggleShare:()=>{const e=(0,o.getContext)();e.isShareOpen=!e.isShareOpen},expCopyLink:()=>{const e=(0,o.getContext)().expShareUrl;navigator.clipboard.writeText(e),n.Copied=!0,setTimeout((()=>{n.Copied=!1}),2e3)}},callbacks:{expSetupLightbox:()=>{window.addEventListener("keydown",(e=>{"Escape"===e.key&&(0,o.store)("buntywp/explicit-media").actions.expHideLightbox()})),window.addEventListener("click",(function(e){!e.target.closest(".exp-media-share-button")&&!e.target.closest(".exp-share-popup")&&document.querySelectorAll(".exp-share-popup").forEach((e=>{e.classList.add("hide")}))}))}}});var r,i;